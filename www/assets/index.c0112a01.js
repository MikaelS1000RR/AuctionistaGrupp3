var Ie=Object.defineProperty;var ue=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var pe=(i,o,t)=>o in i?Ie(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,he=(i,o)=>{for(var t in o||(o={}))Pe.call(o,t)&&pe(i,t,o[t]);if(ue)for(var t of ue(o))Be.call(o,t)&&pe(i,t,o[t]);return i};import{r as s,j as e,u as _,a,N as De,L as $,b as Le,c as Oe,C as ke,d as Ue,S as G,e as ge,s as z,f as qe,g as Te,n as je,B as Ee,h as Ae,R as K,i as Fe,k as He}from"./vendor.46cf7a1e.js";const Re=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};Re();const me=s.exports.createContext(),V=()=>s.exports.useContext(me),Ye=({children:i})=>{const[o,t]=s.exports.useState(""),[c,r]=s.exports.useState(""),[n,h]=s.exports.useState(""),[v,u]=s.exports.useState(""),[m,b]=s.exports.useState(!1);s.exports.useEffect(()=>{v==""&&d()},[v]);const d=async()=>{let x=await fetch("/api/whoami");try{let I=await x.json();t(I.id),r(I.username),h(I.email),u(I),b(!0)}catch{t(""),r(""),h("")}},p={user:v,userId:o,userName:c,email:n,setUserName:r,whoAmI:d,isLoggedIn:m,setIsLoggedIn:b};return e(me.Provider,{value:p,children:i})};const Me=i=>{const[o,t]=s.exports.useState(!1);let c=_();const{userId:r,userName:n,email:h,setUserName:v,whoAmI:u,isLoggedIn:m,setIsLoggedIn:b}=V(),d=async()=>{await fetch("/logout"),v(""),b(!1),await u(),c.push("/"),window.location.reload(!1)};s.exports.useEffect(()=>{v(n)},[n]);const p=()=>t(!o);return e("div",{children:a(De,{color:"light",light:!0,expand:"md",children:[e($,{to:"/",style:Y.link,children:e(Le,{children:"Auctionista"})}),m&&a("h5",{children:["Hello! ",n]}),e(Oe,{onClick:p}),e(ke,{isOpen:o,navbar:!0,children:a(Ue,{className:"mr-auto",navbar:!0,children:[m&&e("button",{style:Y.button,children:e($,{to:"/upload",style:Y.link,children:"Upload"})}),!m&&e("button",{style:Y.button,children:e($,{to:"/login",style:Y.link,children:"Login"})}),!m&&e("button",{style:Y.button,children:e($,{to:"/register",style:Y.link,children:"Register"})}),m&&e("button",{style:Y.button,onClick:d,children:"Logout"})]})})]})})},Y={link:{textDecoration:"none",color:"black"},button:{border:"none"}};var $e="/assets/Bicycleicon.f230e4fa.svg",Ve="/assets/Clothingicon.3f1f4975.svg",Je="/assets/Homeicon.35812372.svg",Ge="/assets/Kitchenicon.f033309d.svg",Ke="/assets/Litteratureicon.c5cdaed2.svg",We="/assets/Techicon.de142e5b.svg",_e="/assets/Toolsicon.0e843ca7.svg",ze="/assets/Vehicleicon.31365938.svg",se="/assets/MoneyiconLogo.18ba04a2.svg",ae="/assets/PackageiconLogo.b998b15a.svg",Qe="/assets/Searchicon.727c94a2.svg",re="/assets/SearchiconLogo.75700e7d.svg",E="/assets/UploadIcon.b1de9331.svg";const W=s.exports.createContext(),be=()=>s.exports.useContext(W);function Xe(i){const[o,t]=s.exports.useState([]),[c,r]=s.exports.useState([]),[n,h]=s.exports.useState([]),[v,u]=s.exports.useState(),[m,b]=s.exports.useState([]),[d,p]=s.exports.useState(""),{userId:x,whoAmI:I}=V(),O=async w=>{let y=await fetch("/api/products/"+w);y=await y.json();let S=!1,C=0,F=0;y.bids.length>0&&y.bids.forEach(D=>{D.price>F&&(F=D.price,C=D.bidderId.id,C==x?S=!0:S=!1)}),y.isUserHighestBidder=S;let M=new Date,J=y.endDate;M>J?y.expired=!0:y.expired=!1,y.productOwnerId.id==x?y.owner=!0:y.owner=!1;let k=y.endDate;k=new Date(parseInt(k)),k=k.toISOString(),k=k.slice(0,10),y.endDate=k,f(y.bids),u(y)};function f(w){let y=w[0];for(let S=0;S<w.length;S++)w[S].price>y.price&&(y=w[S]);b(y)}const B=async w=>{try{let y=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}),S=y.status;return y=await y.json(),S}catch{return console.log("Upload did not work"),"ERROR"}},P=async()=>{let w=await fetch("/api/products");w=await w.json(),r(w)},A=async w=>{let y="title="+w.title+"&locationId="+w.location+"&categoryId="+w.category;console.log("convertSearchings",y);let S=await fetch("/api/products/queries?"+y,{method:"GET",headers:{"content-type":"application/json"}});if(S=await S.json(),S.status==404){h([]),p("No matching results found...");return}S.forEach(C=>{let F=0,M=C.bids,J=new Date().getTime(),k=C.endDate,H=!1,D=0;J>k?C.expired=!0:C.expired=!1,M.forEach(R=>{R.price&&R.price>F&&(F=R.price,D=R.bidderId.id,D==x?H=!0:H=!1)}),C.highestBid=F,C.isUserHighestBidder=H,C.productOwnerId.id==x?C.owner=!0:C.owner=!1;let T=C.endDate;T=new Date(parseInt(T)),T=T.toISOString(),T=T.slice(0,10),C.endDate=T}),h(S),p("")};s.exports.useEffect(()=>{I()},[x]);const U={products:o,uploadProduct:B,getProductById:O,allProducts:c,fetchAllProducts:P,productsBySearch:n,fetchProductBySearch:A,productById:v,highestBidder:m,setProductsBySearch:h,notFound:d};return e(W.Provider,{value:U,children:i.children})}const ve=s.exports.createContext(),ye=()=>s.exports.useContext(ve),Ze=i=>{const[o,t]=s.exports.useState(""),[c,r]=s.exports.useState(""),[n,h]=s.exports.useState(0),[v,u]=s.exports.useState(0),[m,b]=s.exports.useState(1),d=async f=>{let B=await fetch("/rest/bids/productId/"+f);B=await B.json(),t(B)},[p,x]=s.exports.useState(""),O={bidTitle:c,setBidTitle:r,bidLocation:n,setBidLocation:h,bidCategory:v,setBidCategory:u,bids:p,setBids:x,getBidById:async f=>{let B=await fetch("/rest/bids/"+f);B=await B.json(),x(B)},getBidByProductId:d,bidsByProductId:o,setBidsByProductId:t,bidOnSell:m,setBidOnSell:b};return e(ve.Provider,{value:O,children:i.children})},ie=i=>{const{userId:o}=V(),{fetchProductBySearch:t,getProductById:c}=be(),{bidTitle:r,bidLocation:n,bidCategory:h,bidOnSell:v}=ye();return e("div",{children:e("div",{className:"bidbtn-wrap",onClick:async()=>{let m=i.startingPrice,b=i.maxBid,d=Number(i.bidIncrease),p=0;b==0?(p=m,d?p+=d:p=i.startingPrice*1.1):(p=i.maxBid,d?p+=d:p=i.maxBid*1.1);const x={bidderTime:new Date,price:p,productId:{id:i.product},bidderId:{id:o}};try{let I=await fetch("/rest/bids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});swal("Success","Your bid has been registered!","success"),t({title:r,location:n,category:h,onSell:v}),i.productId&&c(i.productId)}catch{console.log("Bid did not work")}},children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"Place bid above leading price"})]})})})},xe=s.exports.createContext(),ne=()=>s.exports.useContext(xe);function et(i){const[o,t]=s.exports.useState([]),c=async()=>{let n=await fetch("/rest/categories");n=await n.json(),t(n)},r={getCategories:c,categories:o};return s.exports.useEffect(()=>{c()},[]),e(xe.Provider,{value:r,children:i.children})}const fe=s.exports.createContext(),oe=()=>s.exports.useContext(fe);function tt(i){const[o,t]=s.exports.useState([]),c=async()=>{let n=await fetch("/rest/locations");n=await n.json(),t(n)},r={getLocations:c,locations:o};return s.exports.useEffect(()=>{c()},[]),e(fe.Provider,{value:r,children:i.children})}const Ne=s.exports.createContext(),Z=()=>s.exports.useContext(Ne);function st(i){const[o,t]=s.exports.useState(0),[c,r]=s.exports.useState(0),[n,h]=s.exports.useState(""),b={saveSelectedLocation:d=>{t(d),localStorage.setItem("selectedLocation",d)},saveSelectedCategory:d=>{r(d),localStorage.setItem("selectedCategory",d)},saveInputedProduct:d=>{h(d),localStorage.setItem("selectedCategory",d)},selectedLocation:o,selectedCategory:c,inputedProduct:n};return s.exports.useEffect(()=>{},[]),e(Ne.Provider,{value:b,children:i.children})}const at=()=>{const{setBidTitle:i,setBidLocation:o,setBidCategory:t,setBidOnSell:c}=ye(),{isLoggedIn:r}=V(),{setProductsBySearch:n,notFound:h}=s.exports.useContext(W),{fetchProductBySearch:v}=s.exports.useContext(W),{productsBySearch:u}=s.exports.useContext(W),[m,b]=s.exports.useState(""),[d,p]=s.exports.useState(0),[x,I]=s.exports.useState(0),{locations:O}=oe(),{categories:f}=ne(),[B,P]=s.exports.useState([]),[A,U]=s.exports.useState([]),[w,y]=s.exports.useState(""),[S,C]=s.exports.useState(!1),F=()=>C(l=>!l),{saveSelectedLocation:M,saveSelectedCategory:J,saveInputedProduct:k}=Z();let H=_(),D=0;S&&(D=1);async function T(){let l=[];O.map(j=>{l.push({value:j.id,label:j.name})}),P([...l]);let q=[];f.map(j=>{q.push({value:j.id,label:j.name})}),U([...q])}function R(){r||H.push("/login");let l={title:m,location:d,category:x,onSell:D};i(m),o(d),t(x),c(D),v(l),M(d),J(x),k(m)}const ee=async(l,q)=>{p(l.value)},le=async(l,q)=>{I(l.value)},g=()=>{v({title:"",location:0,category:0,onSell:D})};s.exports.useEffect(()=>{T(),g()},[O,f]);const L={ignoreCase:!0,ignoreAccents:!0,trim:!0,matchFrom:"start"};function N(l){v({title:m,location:d,category:l,onSell:D})}function Q(){n([])}return a("div",{className:"home",children:[e("div",{className:"logowrap",children:a("div",{className:"logo",children:[e("img",{src:re}),e("img",{src:se}),e("img",{src:ae})]})}),a("div",{className:"informationwrap",children:[e("h3",{className:"subtitle",children:"Online auction - made easy"}),!r&&e("p",{className:"information",children:"Place your items on auction for others to bid on and possibly buy. You set starting price and duration of item on sale. Keep easy track of your auctions and biddings and search and filter through a variety of categories and products all ready to be bought."}),!r&&e("button",{className:"register",children:a($,{to:"/register",className:"link",children:[e("img",{src:E})," Join now"]})})]}),e("hr",{className:"break"}),e("p",{className:"searchdescription",children:"Search products, categories or location"}),a("div",{className:"searchwrap",children:[a("div",{className:"inputwrap",children:[e("img",{src:Qe}),e("input",{type:"text",placeholder:"Search",onChange:l=>b(l.target.value)})]}),e("label",{className:"location-label",children:"Select Location \u{1F4CD}"}),e(G,{defaultValue:"",onChange:ee,options:B,className:"selectLocation"},"2"),e("label",{className:"category-label",children:"Select Category"}),e(G,{defaultValue:"",onChange:le,options:A,filterOption:ge(L),className:"SelectCategory"},"3"),e("div",{className:"search",children:e("button",{className:"searchbtn",onClick:R,children:"Search"})})]}),e("hr",{className:"break"}),e("input",{type:"checkbox",checked:S,onChange:F}),e("div",{className:"search",children:"Also show expired products"}),e("p",{className:"categories",children:"Categories"}),a("div",{className:"categorywrap",children:[a("div",{className:"categoryrow",children:[e("img",{src:ze,onClick:()=>N(4)}),e("img",{src:$e,onClick:()=>N(1)}),e("img",{src:We,onClick:()=>N(2)}),e("img",{src:Ve,onClick:()=>N(3)})]}),a("div",{className:"categoryrow",children:[e("img",{src:Ge,onClick:()=>N(5)}),e("img",{src:Je,onClick:()=>N(6)}),e("img",{src:_e,onClick:()=>N(7)}),e("img",{src:Ke,onClick:()=>N(8)})]})]}),r&&a("div",{children:[e("hr",{className:"break"}),a("div",{className:"upperproducts",children:[e("p",{className:"products",children:"Products"}),u.length>0&&e("p",{className:"more",onClick:Q,children:"Clear"})]}),h&&e("p",{className:"notFound",children:h}),u&&e("div",{className:"productswrap",children:u.map(l=>a("div",{className:"productwrap",children:[(S||!l.expired)&&a($,{to:`/productDetail/${l.id}`,className:"productroute",children:[e("div",{className:"productimg",children:e("img",{className:"productImage",src:l.imageUrl&&l.imageUrl.split(",")[0]})}),a("div",{className:"productinfo",children:[a("div",{className:"flex-row",children:[e("p",{className:"title",children:l.title}),a("p",{className:"bids",children:[l.bids.length," bids"]})]}),a("p",{className:"price",children:["Starting price: ",l.startingPrice]}),a("p",{className:"price",children:["Highest bid: ",l.highestBid]}),e("div",{className:"flex-row",children:a("p",{className:"endtime",children:["End date: ",l.endDate]})})]})]}),S&&l.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"Product has expired"})]})}),!l.owner&&!l.expired&&!l.isUserHighestBidder&&e("input",{type:"number",placeholder:"Bid value to increase with. If empty bid is increased with 10%",required:"required",onChange:q=>y(q.target.value)}),!l.owner&&!l.expired&&!l.isUserHighestBidder&&e(ie,{product:l.id,startingPrice:l.startingPrice,bidIncrease:w,maxBid:l.highestBid}),l.owner&&!l.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"You can not bid on your product"})]})}),!l.owner&&!l.expired&&l.isUserHighestBidder&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"You are already highest bidder"})]})})]},l.id))})]})]})};const rt=()=>{const[i,o]=s.exports.useState(""),[t,c]=s.exports.useState("");let r=_();const{userName:n,email:h,whoAmI:v,setIsLoggedIn:u}=V();return a("div",{className:"logincontainer",children:[e("h1",{className:"logintitle",children:"Login"}),e("div",{className:"iconcontainer",children:a("div",{children:[e("img",{src:re}),e("img",{src:se}),e("img",{src:ae})]})}),e("div",{className:"productnamewrap",children:e("p",{className:"productname",children:"AUCTIONISTA"})}),e("hr",{className:"line"}),a("form",{onSubmit:async b=>{b.preventDefault();const d={username:i,password:t};let p=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),x={title:"",location:0,category:0,onSell:1};try{(await p.json()).status==200&&(u(!0),r.push("/"),fetchProductBySearch(x)),await v(),p.status==401?z("Error","Wrong Credentials ","error"):(r.push("/"),fetchProductBySearch(x))}catch{console.log("something went wrong")}},children:[a("div",{className:"fieldwrap",children:[e("input",{className:"usernamefield field",type:"text",placeholder:"username",required:"required",value:i,onChange:b=>o(b.target.value)}),e("input",{className:"passwordfield field",type:"password",placeholder:"password",value:t,required:"required",onChange:b=>c(b.target.value)})]}),e("hr",{className:"line"}),e("div",{className:"centerwrap",children:e("button",{className:"loginbtn",children:"Login"})})]}),a("div",{className:"centerwrap",children:[e("p",{className:"notregistered",children:"Not registered?"}),e($,{to:"/register",children:e("p",{className:"register",children:"Register"})})]}),e("h1",{children:n}),e("h1",{children:h})]})};var ce="/assets/UserIcon.770f59fe.svg";const it=()=>{const{id:i}=qe(),{getProductById:o,productById:t,highestBidder:c}=be(),r=i,[n,h]=s.exports.useState(""),{userId:v,whoAmI:u}=V(),[m,b]=s.exports.useState([]),[d,p]=s.exports.useState(!1),x=async()=>{await o(i),b(t)};function I(){p(!d)}function O(f){return f.substring(0,10)}return s.exports.useEffect(()=>{u(),x()},[v]),a("div",{children:[e("div",{className:"emptyDiv"}),t&&a("div",{className:"container",children:[e(Te,{children:t.imageUrl&&t.imageUrl.split(",").map((f,B)=>e("img",{src:f,className:"singleimg"},B))}),a("div",{className:"infowrap",children:[a("p",{className:"category-location",children:[t.categoryId.name," \u2022 ",t.locationId.name]}),e("p",{className:"product-title",children:t.title}),e("p",{className:"product-brand",children:t.brand}),e("p",{className:"description-price",children:"Starting price"}),e("p",{className:"product-price",children:t.startingPrice}),e("p",{className:"description-condition",children:"Condition"}),e("p",{className:"product-condition",children:t.condition}),e("p",{className:"description-details",children:"Details"}),e("p",{className:"product-details",children:t.details}),e("p",{className:"description-endDate",children:"Ends"}),a("p",{className:"product-endDate",children:["End date: ",t.endDate]})]}),e("hr",{className:"hr-break"}),a("div",{className:"middle-container",children:[e("p",{className:"description-title",children:"Description"}),e("div",{className:"description-wrap",children:e("p",{className:"product-description",children:t.description})}),e("p",{className:"description-bidding",children:"Bidding"}),t.bids.length==0&&a("div",{className:"nobids-wrap",children:[e("p",{className:"product-bidding",children:"0 bids"}),a("div",{className:"bidbtn-wrap",children:[t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"Product has expired"})]})}),!t.owner&&!t.expired&&e("input",{type:"number",placeholder:"Bid value to increase with. If empty bid is increased with 10%",required:"required",onChange:f=>h(f.target.value)}),!t.owner&&!t.expired&&e(ie,{product:r,startingPrice:t.startingPrice,bidIncrease:n,maxBid:0,productId:r}),t.owner&&!t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"You can not bid on your product"})]})})]})]}),t.bids.length>0&&c&&a("div",{className:"bidswrap",children:[a("div",{className:"wrap",children:[a("p",{className:"product-bidding",children:[t.bids.length," bids"]}),e("p",{className:"morebids",onClick:I,children:d?"Close":"Show more"})]}),e("p",{className:"highestbid-title",children:"Highest bid"}),a("div",{className:"highestbidder",children:[e("img",{src:ce,className:"avatar"}),e("p",{className:"highestbidder-user",children:c.bidderId.username}),e("p",{className:"highestbid-price",children:c.price}),e("p",{className:"bidDate",children:O(c.bidderTime)}),t.expired&&e("p",{children:" Winner \u{1F451}"})]}),d&&a("div",{className:"allbids",children:[e("p",{className:"allbids-title",children:"All bids"}),t.bids.map(f=>a("div",{className:"bidwrap",children:[e("img",{src:ce,className:"bid-usericon"}),e("p",{className:"bidtext",children:f.bidderId.username}),e("p",{className:"bidtext",children:f.price}),e("p",{className:"bidtext",children:O(f.bidderTime)})]}))]}),t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"Product has expired"})]})}),!t.owner&&!t.expired&&!t.isUserHighestBidder&&e("input",{type:"number",placeholder:"Bid value to increase with. If empty bid is increased with 10%",required:"required",onChange:f=>h(f.target.value)}),!t.owner&&!t.expired&&!t.isUserHighestBidder&&e(ie,{product:r,startingPrice:t.startingPrice,bidIncrease:n,maxBid:c.price,productId:r}),t.owner&&!t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"You can not bid on your product"})]})}),!t.owner&&!t.expired&&t.isUserHighestBidder&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:E}),e("p",{className:"bidbtn-text",children:"You are already highest bidder"})]})})]}),e("hr",{className:"hr-break"}),e("p",{className:"seller-title",children:"Seller"}),a("div",{className:"sellercontainer",children:[e("img",{src:ce,className:"seller-icon"}),e("p",{className:"seller",children:t.productOwnerId.username})]})]})]})]})};function nt(){const{productsBySearch:i,fetchProductBySearch:o}=s.exports.useContext(W),[t,c]=s.exports.useState(!1),[r,n]=s.exports.useState(""),{selectedLocation:h,selectedCategory:v,inputedProduct:u}=Z();s.exports.useEffect(async()=>{let x=he({},{location:h,title:u,category:v});await o(x)},[h,v,u]);const m=p=>{c(!0),n(p)},b=()=>{c(!1)},d=p=>e("div",{style:{width:"fit-content",margin:"5px 5px 20px 5px",borderRadius:"10px",transition:"all 200ms ease-in-out",":hover":{boxShadow:"0px 8px 36px #222",WebkitTransform:"scale(1.01)"}},children:a("div",{spacing:1,style:{cursor:"pointer"},onClick:()=>m(p._id),children:[e("h5",{children:p.brand}),e("h5",{children:p.title}),a("h5",{children:[p.startingPrice," \u20AC "]})]})},p.id);return a("div",{children:[a("div",{style:{fontSize:"20px",padding:"20px",backgroundColor:"#66A395",color:"black"},children:[e("b",{children:i.length})," Procucts"]}),i.map(p=>d(p)),t?e(DetailPage,{productId:r,closeModal:b}):""]})}function ot(i){const{locations:o}=oe(),{categories:t}=ne(),[c,r]=s.exports.useState(""),[n,h]=s.exports.useState([]),[v,u]=s.exports.useState([]),[m,b]=s.exports.useState([]),[d,p]=s.exports.useState([]),{saveInputedProduct:x}=Z();async function I(){let P=[];o.map(U=>{P.push({value:U.id,label:U.name})}),b([...P]);let A=[];t.map(U=>{A.push({value:U.id,label:U.name})}),p([...A])}return s.exports.useEffect(()=>{I()},[o,t]),a("div",{children:[e("div",{className:"inputwrap",children:e("input",{name:"product",type:"text",value:c,onChange:P=>{r(P.target.value),x(P.target.value)}},"1")}),e(G,{defaultValue:"",onChange:async(P,A)=>{i.getLocationData(P),h(P.value)},options:m},"2"),e(G,{defaultValue:"",onChange:async(P,A)=>{i.getCategoryData(P),u(P.value)},options:d,filterOption:ge({ignoreCase:!0,ignoreAccents:!0,trim:!0,matchFrom:"start"})},"3")]})}const ct=()=>{const{saveSelectedLocation:i,saveSelectedCategory:o}=Z();return a("div",{children:[e(ot,{getLocationData:r=>{localStorage.setItem("selectedLocation",r.value),i(r.value)},getCategoryData:r=>{localStorage.setItem("selectedCategory",r.value),o(r.value)}}),e("br",{})," ",e("br",{})]})},lt=()=>a("div",{className:"productList",children:[e(ct,{}),e(nt,{})]});const dt=()=>{const[i,o]=s.exports.useState(""),[t,c]=s.exports.useState(""),[r,n]=s.exports.useState("");let h=_();return a("div",{className:"registercontainer",children:[e("h1",{className:"registertitle",children:"Register"}),e("div",{className:"iconcontainer",children:a("div",{children:[e("img",{src:re}),e("img",{src:se}),e("img",{src:ae})]})}),e("div",{className:"productnamewrap",children:e("p",{className:"productname",children:"AUCTIONISTA"})}),e("hr",{className:"line"}),a("form",{onSubmit:async u=>{u.preventDefault();const m={username:i,password:t,email:r};(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).status==403?z("Error","User already exists ","error"):(z("Success","Your account has been registered!","success"),setTimeout(()=>{h.push("/login")},1e3))},children:[a("div",{className:"fieldwrap",children:[e("input",{className:"field",type:"text",placeholder:"username",required:"required",value:i,onChange:u=>o(u.target.value)}),e("input",{className:"field",type:"email",placeholder:"email",required:"required",value:r,onChange:u=>n(u.target.value)}),e("input",{className:"field",type:"password",placeholder:"password",required:"required",value:t,onChange:u=>c(u.target.value)})]}),e("hr",{className:"line"}),e("div",{className:"centerwrap",children:e("button",{className:"registerbtn",children:"Register"})})]})]})},Se=s.exports.createContext(),we=()=>s.exports.useContext(Se),ut=({children:i})=>{const[o,t]=s.exports.useState([]),c={images:o,setImages:t};return e(Se.Provider,{value:c,children:i})};function pt(){const{images:i,setImages:o}=we();async function t(r){if(r.target.files){let n=r.target.files,h=[];new FormData;for(let v of n){let u=new Image;u.src=URL.createObjectURL(v),u.onload=async()=>{let m=document.createElement("canvas"),b=m.getContext("2d");m.width=u.width,m.height=u.height,b.drawImage(u,0,0);let d=m.toDataURL("image/jpeg",.8);h.push(d),h.length==n.length&&o(h)}}}}return e("div",{children:a("label",{className:"fileupload",children:[e("input",{type:"file",multiple:!0,accept:"image/*",onChange:t,required:"required"}),e("div",{className:"result",children:(r=>r.map(n=>e("img",{src:n,alt:"",style:ht.img},n)))(i)})]})})}const ht={img:{width:"320px",height:"180px",objectFit:"cover",padding:"0.75rem"}};function gt(){const{images:i}=we(),{user:o}=V(),{locations:t}=oe(),{categories:c}=ne(),[r,n]=s.exports.useState([]),[h,v]=s.exports.useState([]),[u,m]=s.exports.useState(""),[b,d]=s.exports.useState(""),[p,x]=s.exports.useState(""),[I,O]=s.exports.useState(""),[f,B]=s.exports.useState(""),[P,A]=s.exports.useState(""),[U,w]=s.exports.useState(""),[y,S]=s.exports.useState(""),[C,F]=s.exports.useState("");let M=_(),k=new Date(P).getTime();const H=()=>{const g=new Date,L=String(g.getDate()+1).padStart(2,"0"),N=String(g.getMonth()+1).padStart(2,"0");return g.getFullYear()+"-"+N+"-"+L},D=()=>{const g=new Date,L=String(g.getDate()+1).padStart(2,"0"),N=String(g.getMonth()+2).padStart(2,"0");return g.getFullYear()+"-"+N+"-"+L},T=async(g,L)=>{const N={id:g.value};S(N)},R=async(g,L)=>{const N={id:g.value};O(N)};async function ee(){let g=[];t.map(N=>{g.push({value:N.id,label:N.name})}),n([...g]);let L=[];c.map(N=>{L.push({value:N.id,label:N.name})}),v([...L])}return s.exports.useEffect(()=>{ee()},[t,c]),a("div",{className:"uploadview",children:[e("p",{className:"backroute",children:"Back"}),e("h1",{className:"uploadtitle",children:"Upload"}),a("form",{onSubmit:async g=>{g.preventDefault();const L=new FormData;let N=new Date().toISOString().slice(0,10);for(let q of i){let j=l(q),te=je()+".jpeg";L.append("files",j,te)}L.append("product",JSON.stringify({title:u,brand:b,details:p,categoryId:I,startingPrice:f,endDate:k,condition:U,locationId:y,description:C,uploadDate:N,productOwnerId:o})),(await fetch("/api/products/createProduct",{method:"POST",body:L})).status==200?(z("Success","Your product has been uploaded!","success"),M.push("/")):z("Error","Something went wrong. Your product couldn't be uploaded ","error");function l(q){let j=atob(q.split(",")[1]),te=q.split(",")[0].split(":")[1].split(";")[0],de=new ArrayBuffer(j.length),Ce=new Uint8Array(de);for(let X=0;X<j.length;X++)Ce[X]=j.charCodeAt(X);return new Blob([de],{type:te})}},children:[e("div",{className:"inputwrap",children:e("input",{type:"text",maxlength:"50",placeholder:"Title",required:"required",value:u,onChange:g=>m(g.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Brand",required:"required",value:b,onChange:g=>d(g.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Details (single or commaseparated list)",required:"required",value:p,onChange:g=>x(g.target.value)})}),e("div",{className:"inputwrap",children:e(G,{placeholder:"Category",required:"required",options:h,onChange:R})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Starting price",required:"required",value:f,onChange:g=>B(g.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",onFocus:g=>{g.currentTarget.type="date",g.currentTarget.focus()},placeholder:"End Date",min:H(),max:D(),required:"required",value:P,onChange:g=>A(g.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Condition",required:"required",value:U,onChange:g=>w(g.target.value)})}),e("div",{className:"inputwrap",children:e(G,{placeholder:"Location",required:"required",options:r,onChange:T})}),e("div",{className:"inputwrap",children:e("textarea",{name:"",id:"",cols:"30",rows:"5",placeholder:"Description",required:"required",value:C,onChange:g=>F(g.target.value)})}),e(pt,{}),e("hr",{className:"break"}),e("div",{className:"uploadbtn-wrap",children:a("button",{className:"uploadbtn",children:[e("img",{src:E,className:"uploadicon"})," Upload"]})})]})]})}s.exports.createContext();function mt(){return e(Ee,{children:a("div",{className:"App",children:[e(Me,{}),e("div",{className:"content",children:a(Ae,{children:[e(K,{exact:!0,path:"/",component:at}),e(K,{exact:!0,path:"/login",component:rt}),e(K,{exact:!0,path:"/register",component:dt}),e(K,{exact:!0,path:"/products",component:lt}),e(K,{exact:!0,path:"/upload",component:gt}),e(K,{exact:!0,path:"/productDetail/:id",component:it})]})})]})})}Fe.render(e(He.StrictMode,{children:e(Ye,{children:e(Xe,{children:e(tt,{children:e(et,{children:e(st,{children:e(ut,{children:e(Ze,{children:e(mt,{})})})})})})})})}),document.getElementById("root"));
