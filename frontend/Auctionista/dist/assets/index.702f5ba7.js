var Le=Object.defineProperty;var be=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var ve=(i,o,t)=>o in i?Le(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,ye=(i,o)=>{for(var t in o||(o={}))De.call(o,t)&&ve(i,t,o[t]);if(be)for(var t of be(o))Oe.call(o,t)&&ve(i,t,o[t]);return i};import{r as s,j as e,u as ee,a,N as ke,L as V,b as Ue,c as qe,C as Te,d as je,S as W,e as fe,s as te,n as Ee,f as Ae,g as Fe,B as He,h as Re,R as _,i as Ye,k as Me}from"./vendor.06c3538c.js";const $e=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};$e();const xe=s.exports.createContext(),J=()=>s.exports.useContext(xe),Ve=({children:i})=>{const[o,t]=s.exports.useState(""),[l,r]=s.exports.useState(""),[n,p]=s.exports.useState(""),[f,d]=s.exports.useState(""),[b,x]=s.exports.useState(!1);s.exports.useEffect(()=>{f==""&&u()},[f]);const u=async()=>{let v=await fetch("/api/whoami");try{let I=await v.json();t(I.id),r(I.username),p(I.email),d(I),x(!0)}catch{t(""),r(""),p("")}},g={user:f,userId:o,userName:l,email:n,setUserName:r,whoAmI:u,isLoggedIn:b,setIsLoggedIn:x};return e(xe.Provider,{value:g,children:i})};const Je=i=>{const[o,t]=s.exports.useState(!1);let l=ee();const{userId:r,userName:n,email:p,setUserName:f,whoAmI:d,isLoggedIn:b,setIsLoggedIn:x}=J(),u=async()=>{await fetch("/logout"),f(""),x(!1),await d(),l.push("/"),window.location.reload(!1)};s.exports.useEffect(()=>{f(n)},[n]);const g=()=>t(!o);return e("div",{children:a(ke,{color:"light",light:!0,expand:"md",children:[e(V,{to:"/",style:R.link,children:e(Ue,{children:"Auctionista"})}),b&&a("h5",{children:["Hello! ",n]}),e(qe,{onClick:g}),e(Te,{isOpen:o,navbar:!0,children:a(je,{className:"mr-auto",navbar:!0,children:[b&&e("button",{style:R.button,children:e(V,{to:"/upload",style:R.link,children:"Upload"})}),!b&&e("button",{style:R.button,children:e(V,{to:"/login",style:R.link,children:"Login"})}),!b&&e("button",{style:R.button,children:e(V,{to:"/register",style:R.link,children:"Register"})}),b&&e("button",{style:R.button,onClick:u,children:"Logout"})]})})]})})},R={link:{textDecoration:"none",color:"black"},button:{border:"none"}},z=s.exports.createContext(),ne=()=>s.exports.useContext(z);function Ge(i){const[o,t]=s.exports.useState([]),[l,r]=s.exports.useState([]),[n,p]=s.exports.useState([]),[f,d]=s.exports.useState(),[b,x]=s.exports.useState([]),[u,g]=s.exports.useState(""),{userId:v,whoAmI:I}=J(),P=async()=>{let N=await fetch("/api/products");N=await N.json(),N.forEach(h=>{let S=0;h.bids.forEach(O=>{O.price&&O.price>S&&(S=O.price)}),h.highestBid=S,h.productOwnerId.id==v?h.owner=!0:h.owner=!1}),t(N)},y=async N=>{let h=await fetch("/api/products/"+N);h=await h.json();let S=!1,B=0,O=0;h.bids.length>0&&h.bids.forEach(A=>{A.price>O&&(O=A.price,B=A.bidderId.id,B==v?S=!0:S=!1)}),h.isUserHighestBidder=S;let G=new Date,Y=h.endDate;G>Y?h.expired=!0:h.expired=!1,h.productOwnerId.id==v?h.owner=!0:h.owner=!1;let U=h.endDate;U=new Date(parseInt(U)),U=U.toISOString(),U=U.slice(0,10),h.endDate=U,L(h.bids),d(h)};function L(N){let h=N[0];for(let S=0;S<N.length;S++)N[S].price>h.price&&(h=N[S]);x(h)}const w=async N=>{try{let h=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),S=h.status;return h=await h.json(),S}catch{return console.log("Upload did not work"),"ERROR"}},E=async()=>{let N=await fetch("/api/products");N=await N.json(),r(N)},D=async N=>{let h="title="+N.title+"&locationId="+N.location+"&categoryId="+N.category+"&onSell="+N.onSell;console.log("convertSearchings",h);let S=await fetch("/api/products/queries?"+h,{method:"GET",headers:{"content-type":"application/json"}});if(S=await S.json(),S.status==404){p([]),g("No matching results found...");return}S.forEach(B=>{let O=0,G=B.bids,Y=new Date().getTime(),U=B.endDate,q=!1,A=0;Y>U?B.expired=!0:B.expired=!1,G.forEach(H=>{H.price&&H.price>O&&(O=H.price,A=H.bidderId.id,A==v?q=!0:q=!1)}),B.highestBid=O,B.isUserHighestBidder=q,B.productOwnerId.id==v?B.owner=!0:B.owner=!1;let T=B.endDate;T=new Date(parseInt(T)),T=T.toISOString(),T=T.slice(0,10),B.endDate=T}),p(S),g("")};s.exports.useEffect(()=>{P(),I()},[v]);const Q={products:o,getProducts:P,uploadProduct:w,getProductById:y,allProducts:l,fetchAllProducts:E,productsBySearch:n,fetchProductBySearch:D,productById:f,highestBidder:b,setProductsBySearch:p,notFound:u};return e(z.Provider,{value:Q,children:i.children})}const Ne=s.exports.createContext(),oe=()=>s.exports.useContext(Ne);function Ke(i){const[o,t]=s.exports.useState([]),l=async()=>{let n=await fetch("/rest/locations");n=await n.json(),t(n)},r={getLocations:l,locations:o};return s.exports.useEffect(()=>{l()},[]),e(Ne.Provider,{value:r,children:i.children})}const Se=s.exports.createContext(),ce=()=>s.exports.useContext(Se);function We(i){const[o,t]=s.exports.useState([]),l=async()=>{let n=await fetch("/rest/categories");n=await n.json(),t(n)},r={getCategories:l,categories:o};return s.exports.useEffect(()=>{l()},[]),e(Se.Provider,{value:r,children:i.children})}var j="/assets/UploadIcon.b1de9331.svg";const we=s.exports.createContext(),Ce=()=>s.exports.useContext(we),_e=i=>{const[o,t]=s.exports.useState(""),[l,r]=s.exports.useState(""),[n,p]=s.exports.useState(0),[f,d]=s.exports.useState(0),[b,x]=s.exports.useState(1),u=async y=>{let L=await fetch("/rest/bids/productId/"+y);L=await L.json(),t(L)},[g,v]=s.exports.useState(""),P={bidTitle:l,setBidTitle:r,bidLocation:n,setBidLocation:p,bidCategory:f,setBidCategory:d,bids:g,setBids:v,getBidById:async y=>{let L=await fetch("/rest/bids/"+y);L=await L.json(),v(L)},getBidByProductId:u,bidsByProductId:o,setBidsByProductId:t,bidOnSell:b,setBidOnSell:x};return e(we.Provider,{value:P,children:i.children})},le=i=>{const{userId:o}=J(),{fetchProductBySearch:t,getProductById:l}=ne(),{bidTitle:r,bidLocation:n,bidCategory:p,bidOnSell:f}=Ce();return e("div",{children:e("div",{className:"bidbtn-wrap",onClick:async()=>{let b=i.startingPrice,x=i.maxBid,u=Number(i.bidIncrease),g=0;x==0?(g=b,u?g+=u:g=i.startingPrice*1.1):(g=i.maxBid,u?g+=u:g=i.maxBid*1.1);const v={bidderTime:new Date,price:g,productId:{id:i.product},bidderId:{id:o}};try{let I=await fetch("/rest/bids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});swal("Success","Your bid has been registered!","success"),t({title:r,location:n,category:p,onSell:f}),i.productId&&l(i.productId)}catch{console.log("Bid did not work")}},children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"Place bid above leading price"})]})})})},Ie=s.exports.createContext(),re=()=>s.exports.useContext(Ie);function ze(i){const[o,t]=s.exports.useState(0),[l,r]=s.exports.useState(0),[n,p]=s.exports.useState(""),x={saveSelectedLocation:u=>{t(u),localStorage.setItem("selectedLocation",u)},saveSelectedCategory:u=>{r(u),localStorage.setItem("selectedCategory",u)},saveInputedProduct:u=>{p(u),localStorage.setItem("selectedCategory",u)},selectedLocation:o,selectedCategory:l,inputedProduct:n};return s.exports.useEffect(()=>{},[]),e(Ie.Provider,{value:x,children:i.children})}function Qe(i){const{locations:o}=oe(),{categories:t}=ce(),[l,r]=s.exports.useState(""),[n,p]=s.exports.useState([]),[f,d]=s.exports.useState([]),[b,x]=s.exports.useState([]),[u,g]=s.exports.useState([]),{saveInputedProduct:v}=re();async function I(){let w=[];o.map(D=>{w.push({value:D.id,label:D.name})}),x([...w]);let E=[];t.map(D=>{E.push({value:D.id,label:D.name})}),g([...E])}return s.exports.useEffect(()=>{I()},[o,t]),a("div",{children:[e("div",{className:"inputwrap",children:e("input",{name:"product",type:"text",value:l,onChange:w=>{r(w.target.value),v(w.target.value)}},"1")}),e(W,{defaultValue:"",onChange:async(w,E)=>{i.getLocationData(w),p(w.value)},options:b},"2"),e(W,{defaultValue:"",onChange:async(w,E)=>{i.getCategoryData(w),d(w.value)},options:u,filterOption:fe({ignoreCase:!0,ignoreAccents:!0,trim:!0,matchFrom:"start"})},"3")]})}const Xe=()=>{const{saveSelectedLocation:i,saveSelectedCategory:o}=re();return a("div",{children:[e(Qe,{getLocationData:r=>{localStorage.setItem("selectedLocation",r.value),i(r.value)},getCategoryData:r=>{localStorage.setItem("selectedCategory",r.value),o(r.value)}}),e("br",{})," ",e("br",{})]})},Ze=()=>e("div",{className:"productDetail",children:e("h3",{children:"Product Detail Page"})});function et(){const{productsBySearch:i,fetchProductBySearch:o}=s.exports.useContext(z),[t,l]=s.exports.useState(!1),[r,n]=s.exports.useState(""),{selectedLocation:p,selectedCategory:f,inputedProduct:d}=re();s.exports.useEffect(async()=>{let v=ye({},{location:p,title:d,category:f});await o(v)},[p,f,d]);const b=g=>{l(!0),n(g)},x=()=>{l(!1)},u=g=>e("div",{style:{width:"fit-content",margin:"5px 5px 20px 5px",borderRadius:"10px",transition:"all 200ms ease-in-out",":hover":{boxShadow:"0px 8px 36px #222",WebkitTransform:"scale(1.01)"}},children:a("div",{spacing:1,style:{cursor:"pointer"},onClick:()=>b(g._id),children:[e("h5",{children:g.brand}),e("h5",{children:g.title}),a("h5",{children:[g.startingPrice," \u20AC "]})]})},g.id);return a("div",{children:[a("div",{style:{fontSize:"20px",padding:"20px",backgroundColor:"#66A395",color:"black"},children:[e("b",{children:i.length})," Procucts"]}),i.map(g=>u(g)),t?e(Ze,{productId:r,closeModal:x}):""]})}const tt=()=>(s.exports.useState(!1),a("div",{className:"productList",children:[e(Xe,{}),e(et,{})]}));var de="/assets/SearchiconLogo.75700e7d.svg",ue="/assets/MoneyiconLogo.18ba04a2.svg",pe="/assets/PackageiconLogo.b998b15a.svg",st="/assets/Searchicon.727c94a2.svg";var at="/assets/Vehicleicon.31365938.svg",rt="/assets/Bicycleicon.f230e4fa.svg",it="/assets/Techicon.de142e5b.svg",nt="/assets/Clothingicon.3f1f4975.svg",ot="/assets/Kitchenicon.f033309d.svg",ct="/assets/Toolsicon.0e843ca7.svg",lt="/assets/Litteratureicon.c5cdaed2.svg",dt="/assets/Homeicon.35812372.svg";const ut=()=>{ne();const{bidTitle:i,bidLocation:o,bidCategory:t,bidOnSell:l,setBidTitle:r,setBidLocation:n,setBidCategory:p,setBidOnSell:f}=Ce(),{isLoggedIn:d}=J(),{products:b,getProducts:x,setProductsBySearch:u,highestBidder:g,notFound:v}=s.exports.useContext(z),{fetchProductBySearch:I}=s.exports.useContext(z),{productsBySearch:P}=s.exports.useContext(z),[y,L]=s.exports.useState(""),[w,E]=s.exports.useState(0),[D,Q]=s.exports.useState(0),{locations:N}=oe(),{categories:h}=ce(),[S,B]=s.exports.useState([]),[O,G]=s.exports.useState([]),[Y,U]=s.exports.useState(""),[q,A]=s.exports.useState(!1),T=()=>A(c=>!c),{saveSelectedLocation:H,saveSelectedCategory:ge,saveInputedProduct:m}=re();let k=ee(),C=0;q&&(C=1);async function se(){let c=[];N.map(Z=>{c.push({value:Z.id,label:Z.name})}),B([...c]);let $=[];h.map(Z=>{$.push({value:Z.id,label:Z.name})}),G([...$])}function ie(){d||k.push("/login");let c={title:y,location:w,category:D,onSell:C};r(y),n(w),p(D),f(C),I(c),H(w),ge(D),m(y)}const K=async(c,$)=>{E(c.value)},M=async(c,$)=>{Q(c.value)},X=()=>{I({title:"",location:0,category:0,onSell:C})};s.exports.useEffect(()=>{x(),se(),X()},[N,h]);const ae={ignoreCase:!0,ignoreAccents:!0,trim:!0,matchFrom:"start"};function F(c){I({title:y,location:w,category:c,onSell:C})}function me(){u([])}return a("div",{className:"home",children:[e("div",{className:"logowrap",children:a("div",{className:"logo",children:[e("img",{src:de}),e("img",{src:ue}),e("img",{src:pe})]})}),a("div",{className:"informationwrap",children:[e("h3",{className:"subtitle",children:"Online auction - made easy"}),!d&&e("p",{className:"information",children:"Place your items on auction for others to bid on and possibly buy. You set starting price and duration of item on sale. Keep easy track of your auctions and biddings and search and filter through a variety of categories and products all ready to be bought."}),!d&&e("button",{className:"register",children:a(V,{to:"/register",className:"link",children:[e("img",{src:j})," Join now"]})})]}),e("hr",{className:"break"}),e("p",{className:"searchdescription",children:"Search products, categories or location"}),a("div",{className:"searchwrap",children:[a("div",{className:"inputwrap",children:[e("img",{src:st}),e("input",{type:"text",placeholder:"Search",onChange:c=>L(c.target.value)})]}),e("label",{className:"location-label",children:"Select Location \u{1F4CD}"}),e(W,{defaultValue:"",onChange:K,options:S,className:"selectLocation"},"2"),e("label",{className:"category-label",children:"Select Category"}),e(W,{defaultValue:"",onChange:M,options:O,filterOption:fe(ae),className:"SelectCategory"},"3"),e("div",{className:"search",children:e("button",{className:"searchbtn",onClick:ie,children:"Search"})})]}),e("hr",{className:"break"}),e("input",{type:"checkbox",checked:q,onChange:T}),e("div",{className:"search",children:"Also show expired products"}),e("p",{className:"categories",children:"Categories"}),a("div",{className:"categorywrap",children:[a("div",{className:"categoryrow",children:[e("img",{src:at,onClick:()=>F(4)}),e("img",{src:rt,onClick:()=>F(1)}),e("img",{src:it,onClick:()=>F(2)}),e("img",{src:nt,onClick:()=>F(3)})]}),a("div",{className:"categoryrow",children:[e("img",{src:ot,onClick:()=>F(5)}),e("img",{src:dt,onClick:()=>F(6)}),e("img",{src:ct,onClick:()=>F(7)}),e("img",{src:lt,onClick:()=>F(8)})]})]}),d&&a("div",{children:[e("hr",{className:"break"}),a("div",{className:"upperproducts",children:[e("p",{className:"products",children:"Products"}),P.length>0&&e("p",{className:"more",onClick:me,children:"Clear"})]}),v&&e("p",{className:"notFound",children:v}),P&&e("div",{className:"productswrap",children:P.map(c=>a("div",{className:"productwrap",children:[(q||!c.expired)&&a(V,{to:`/productDetail/${c.id}`,className:"productroute",children:[e("div",{className:"productimg",children:e("img",{className:"productImage",src:c.imageUrl&&c.imageUrl.split(",")[0]})}),a("div",{className:"productinfo",children:[a("div",{className:"flex-row",children:[e("p",{className:"title",children:c.title}),a("p",{className:"bids",children:[c.bids.length," bids"]})]}),a("p",{className:"price",children:["Starting price: ",c.startingPrice]}),a("p",{className:"price",children:["Highest bid: ",c.highestBid]}),e("div",{className:"flex-row",children:a("p",{className:"endtime",children:["End date: ",c.endDate]})})]})]}),q&&c.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"Product has expired"})]})}),!c.owner&&!c.expired&&!c.isUserHighestBidder&&e("input",{type:"number",placeholder:"Bid value to increase with. If empty bid is increased with 10%",required:"required",onChange:$=>U($.target.value)}),!c.owner&&!c.expired&&!c.isUserHighestBidder&&e(le,{product:c.id,startingPrice:c.startingPrice,bidIncrease:Y,maxBid:c.highestBid}),c.owner&&!c.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"You can not bid on your product"})]})}),!c.owner&&!c.expired&&c.isUserHighestBidder&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"You are already highest bidder"})]})})]},c.id))})]})]})};const pt=()=>{const[i,o]=s.exports.useState(""),[t,l]=s.exports.useState("");let r=ee();const{userId:n,userName:p,email:f,setUserName:d,whoAmI:b,isLoggedIn:x,setIsLoggedIn:u}=J();return a("div",{className:"logincontainer",children:[e("h1",{className:"logintitle",children:"Login"}),e("div",{className:"iconcontainer",children:a("div",{children:[e("img",{src:de}),e("img",{src:ue}),e("img",{src:pe})]})}),e("div",{className:"productnamewrap",children:e("p",{className:"productname",children:"AUCTIONISTA"})}),e("hr",{className:"line"}),a("form",{onSubmit:async v=>{v.preventDefault();const I={username:i,password:t};let P=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}),y={title:"",location:0,category:0,onSell:1};try{(await P.json()).status==200&&(u(!0),r.push("/"),fetchProductBySearch(y)),await b(),P.status==401?te("Error","Wrong Credentials ","error"):(r.push("/"),fetchProductBySearch(y))}catch{console.log("something went wrong")}},children:[a("div",{className:"fieldwrap",children:[e("input",{className:"usernamefield field",type:"text",placeholder:"username",required:"required",value:i,onChange:v=>o(v.target.value)}),e("input",{className:"passwordfield field",type:"password",placeholder:"password",value:t,required:"required",onChange:v=>l(v.target.value)})]}),e("hr",{className:"line"}),e("div",{className:"centerwrap",children:e("button",{className:"loginbtn",children:"Login"})})]}),a("div",{className:"centerwrap",children:[e("p",{className:"notregistered",children:"Not registered?"}),e(V,{to:"/register",children:e("p",{className:"register",children:"Register"})})]}),e("h1",{children:p}),e("h1",{children:f})]})};const ht=()=>{const[i,o]=s.exports.useState(""),[t,l]=s.exports.useState(""),[r,n]=s.exports.useState("");let p=ee();return a("div",{className:"registercontainer",children:[e("h1",{className:"registertitle",children:"Register"}),e("div",{className:"iconcontainer",children:a("div",{children:[e("img",{src:de}),e("img",{src:ue}),e("img",{src:pe})]})}),e("div",{className:"productnamewrap",children:e("p",{className:"productname",children:"AUCTIONISTA"})}),e("hr",{className:"line"}),a("form",{onSubmit:async d=>{d.preventDefault();const b={username:i,password:t,email:r};(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).status==403?te("Error","User already exists ","error"):(te("Success","Your account has been registered!","success"),setTimeout(()=>{p.push("/login")},1e3))},children:[a("div",{className:"fieldwrap",children:[e("input",{className:"field",type:"text",placeholder:"username",required:"required",value:i,onChange:d=>o(d.target.value)}),e("input",{className:"field",type:"email",placeholder:"email",required:"required",value:r,onChange:d=>n(d.target.value)}),e("input",{className:"field",type:"password",placeholder:"password",required:"required",value:t,onChange:d=>l(d.target.value)})]}),e("hr",{className:"line"}),e("div",{className:"centerwrap",children:e("button",{className:"registerbtn",children:"Register"})})]})]})};const Be=s.exports.createContext(),Pe=()=>s.exports.useContext(Be),gt=({children:i})=>{const[o,t]=s.exports.useState([]),l={images:o,setImages:t};return e(Be.Provider,{value:l,children:i})};function mt(){const{images:i,setImages:o}=Pe();async function t(r){if(r.target.files){let n=r.target.files,p=[];new FormData;for(let f of n){let d=new Image;d.src=URL.createObjectURL(f),d.onload=async()=>{let b=document.createElement("canvas"),x=b.getContext("2d");b.width=d.width,b.height=d.height,x.drawImage(d,0,0);let u=b.toDataURL("image/jpeg",.8);p.push(u),p.length==n.length&&o(p)}}}}return e("div",{children:a("label",{className:"fileupload",children:[e("input",{type:"file",multiple:!0,accept:"image/*",onChange:t,required:"required"}),e("div",{className:"result",children:(r=>r.map(n=>e("img",{src:n,alt:"",style:bt.img},n)))(i)})]})})}const bt={img:{width:"320px",height:"180px",objectFit:"cover",padding:"0.75rem"}};function vt(){const{images:i}=Pe(),{user:o}=J(),{locations:t}=oe(),{categories:l}=ce(),[r,n]=s.exports.useState([]),[p,f]=s.exports.useState([]),[d,b]=s.exports.useState(""),[x,u]=s.exports.useState(""),[g,v]=s.exports.useState(""),[I,P]=s.exports.useState(""),[y,L]=s.exports.useState(""),[w,E]=s.exports.useState(""),[D,Q]=s.exports.useState(""),[N,h]=s.exports.useState(""),[S,B]=s.exports.useState("");let O=ee(),Y=new Date(w).getTime();const U=()=>{const m=new Date,k=String(m.getDate()+1).padStart(2,"0"),C=String(m.getMonth()+1).padStart(2,"0");return m.getFullYear()+"-"+C+"-"+k},q=()=>{const m=new Date,k=String(m.getDate()+1).padStart(2,"0"),C=String(m.getMonth()+2).padStart(2,"0");return m.getFullYear()+"-"+C+"-"+k},A=async(m,k)=>{const C={id:m.value};h(C)},T=async(m,k)=>{const C={id:m.value};P(C)};async function H(){let m=[];t.map(C=>{m.push({value:C.id,label:C.name})}),n([...m]);let k=[];l.map(C=>{k.push({value:C.id,label:C.name})}),f([...k])}return s.exports.useEffect(()=>{H()},[t,l]),a("div",{className:"uploadview",children:[e("p",{className:"backroute",children:"Back"}),e("h1",{className:"uploadtitle",children:"Upload"}),a("form",{onSubmit:async m=>{m.preventDefault();const k=new FormData;let C=new Date().toISOString().slice(0,10);for(let K of i){let M=ie(K),X=Ee()+".jpeg";k.append("files",M,X)}k.append("product",JSON.stringify({title:d,brand:x,details:g,categoryId:I,startingPrice:y,endDate:Y,condition:D,locationId:N,description:S,uploadDate:C,productOwnerId:o})),(await fetch("/api/products/createProduct",{method:"POST",body:k})).status==200?(te("Success","Your product has been uploaded!","success"),O.push("/")):te("Error","Something went wrong. Your product couldn't be uploaded ","error");function ie(K){let M=atob(K.split(",")[1]),X=K.split(",")[0].split(":")[1].split(";")[0],ae=new ArrayBuffer(M.length),F=new Uint8Array(ae);for(let c=0;c<M.length;c++)F[c]=M.charCodeAt(c);return new Blob([ae],{type:X})}},children:[e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Title",required:"required",value:d,onChange:m=>b(m.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Brand",required:"required",value:x,onChange:m=>u(m.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Details (single or commaseparated list)",required:"required",value:g,onChange:m=>v(m.target.value)})}),e("div",{className:"inputwrap",children:e(W,{placeholder:"Category",required:"required",options:p,onChange:T})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Starting price",required:"required",value:y,onChange:m=>L(m.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",onFocus:m=>{m.currentTarget.type="date",m.currentTarget.focus()},placeholder:"End Date",min:U(),max:q(),required:"required",value:w,onChange:m=>E(m.target.value)})}),e("div",{className:"inputwrap",children:e("input",{type:"text",placeholder:"Condition",required:"required",value:D,onChange:m=>Q(m.target.value)})}),e("div",{className:"inputwrap",children:e(W,{placeholder:"Location",required:"required",options:r,onChange:A})}),e("div",{className:"inputwrap",children:e("textarea",{name:"",id:"",cols:"30",rows:"5",placeholder:"Description",required:"required",value:S,onChange:m=>B(m.target.value)})}),e(mt,{}),e("hr",{className:"break"}),e("div",{className:"uploadbtn-wrap",children:a("button",{className:"uploadbtn",children:[e("img",{src:j,className:"uploadicon"})," Upload"]})})]})]})}var he="/assets/UserIcon.770f59fe.svg";const yt=()=>{const{id:i}=Ae(),{getProductById:o,productById:t,highestBidder:l}=ne(),r=i;s.exports.useState("https://i.kym-cdn.com/photos/images/newsfeed/001/488/696/0e7.jpg");const[n,p]=s.exports.useState(""),{userId:f,whoAmI:d}=J(),[b,x]=s.exports.useState([]),[u,g]=s.exports.useState(!1),v=async()=>{await o(i),x(t)};function I(){g(!u)}function P(y){return y.substring(0,10)}return s.exports.useEffect(()=>{d(),v()},[f]),a("div",{children:[e("div",{className:"emptyDiv"}),t&&a("div",{className:"container",children:[e(Fe,{children:t.imageUrl&&t.imageUrl.split(",").map((y,L)=>e("img",{src:y,className:"singleimg"},L))}),a("div",{className:"infowrap",children:[a("p",{className:"category-location",children:[t.categoryId.name," \u2022 ",t.locationId.name]}),e("p",{className:"product-title",children:t.title}),e("p",{className:"product-brand",children:t.brand}),e("p",{className:"description-price",children:"Starting price"}),e("p",{className:"product-price",children:t.startingPrice}),e("p",{className:"description-condition",children:"Condition"}),e("p",{className:"product-condition",children:t.condition}),e("p",{className:"description-details",children:"Details"}),e("p",{className:"product-details",children:t.details}),e("p",{className:"description-endDate",children:"Ends"}),a("p",{className:"product-endDate",children:["End date: ",t.endDate]})]}),e("hr",{className:"hr-break"}),a("div",{className:"middle-container",children:[e("p",{className:"description-title",children:"Description"}),e("div",{className:"description-wrap",children:e("p",{className:"product-description",children:t.description})}),e("p",{className:"description-bidding",children:"Bidding"}),t.bids.length==0&&a("div",{className:"nobids-wrap",children:[e("p",{className:"product-bidding",children:"0 bids"}),a("div",{className:"bidbtn-wrap",children:[t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"Product has expired"})]})}),!t.owner&&!t.expired&&e("input",{type:"number",placeholder:"Bid value to increase with. If empty bid is increased with 10%",required:"required",onChange:y=>p(y.target.value)}),!t.owner&&!t.expired&&e(le,{product:r,startingPrice:t.startingPrice,bidIncrease:n,maxBid:0,productId:r}),t.owner&&!t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"You can not bid on your product"})]})})]})]}),t.bids.length>0&&l&&a("div",{className:"bidswrap",children:[a("div",{className:"wrap",children:[a("p",{className:"product-bidding",children:[t.bids.length," bids"]}),e("p",{className:"morebids",onClick:I,children:u?"Close":"Show more"})]}),e("p",{className:"highestbid-title",children:"Highest bid"}),a("div",{className:"highestbidder",children:[e("img",{src:he,className:"avatar"}),e("p",{className:"highestbidder-user",children:l.bidderId.username}),e("p",{className:"highestbid-price",children:l.price}),e("p",{className:"bidDate",children:P(l.bidderTime)}),t.expired&&e("p",{children:" Winner \u{1F451}"})]}),u&&a("div",{className:"allbids",children:[e("p",{className:"allbids-title",children:"All bids"}),t.bids.map(y=>a("div",{className:"bidwrap",children:[e("img",{src:he,className:"bid-usericon"}),e("p",{className:"bidtext",children:y.bidderId.username}),e("p",{className:"bidtext",children:y.price}),e("p",{className:"bidtext",children:P(y.bidderTime)})]}))]}),t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"Product has expired"})]})}),!t.owner&&!t.expired&&!t.isUserHighestBidder&&e("input",{type:"number",placeholder:"Bid value to increase with. If empty bid is increased with 10%",required:"required",onChange:y=>p(y.target.value)}),!t.owner&&!t.expired&&!t.isUserHighestBidder&&e(le,{product:r,startingPrice:t.startingPrice,bidIncrease:n,maxBid:l.price,productId:r}),t.owner&&!t.expired&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"You can not bid on your product"})]})}),!t.owner&&!t.expired&&t.isUserHighestBidder&&e("div",{className:"bidbtn-wrap",children:a("button",{className:"placebid",children:[e("img",{src:j}),e("p",{className:"bidbtn-text",children:"You are already highest bidder"})]})})]}),e("hr",{className:"hr-break"}),e("p",{className:"seller-title",children:"Seller"}),a("div",{className:"sellercontainer",children:[e("img",{src:he,className:"seller-icon"}),e("p",{className:"seller",children:t.productOwnerId.username})]})]})]})]})};s.exports.createContext();function ft(){return e(He,{children:a("div",{className:"App",children:[e(Je,{}),e("div",{className:"content",children:a(Re,{children:[e(_,{exact:!0,path:"/",component:ut}),e(_,{exact:!0,path:"/login",component:pt}),e(_,{exact:!0,path:"/register",component:ht}),e(_,{exact:!0,path:"/products",component:tt}),e(_,{exact:!0,path:"/upload",component:vt}),e(_,{exact:!0,path:"/productDetail/:id",component:yt})]})})]})})}Ye.render(e(Me.StrictMode,{children:e(Ve,{children:e(Ge,{children:e(Ke,{children:e(We,{children:e(ze,{children:e(gt,{children:e(_e,{children:e(ft,{})})})})})})})})}),document.getElementById("root"));
